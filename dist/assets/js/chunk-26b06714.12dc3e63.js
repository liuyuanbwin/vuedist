(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26b06714"],{"3cc9":function(e,t,o){"use strict";var l=o("8783"),n=o.n(l);n.a},"64bb":function(e,t,o){},"7f7f":function(e,t,o){var l=o("86cc").f,n=Function.prototype,a=/^\s*function ([^ (]*)/,s="name";s in n||o("9e1e")&&l(n,s,{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},8783:function(e,t,o){},dc8b:function(e,t,o){"use strict";o.r(t);var l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"staff"},[o("div",{staticClass:"staff-top"},[o("el-form",{attrs:{inline:!0}},[o("el-form-item",{staticClass:"btnRight"},[o("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit-outline"},on:{click:function(t){e.addUser()}}},[e._v("添加")])],1)],1)],1),o("div",{staticClass:"tables"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userData,border:""}},[o("el-table-column",{attrs:{type:"index",label:"序号",align:"center",sortable:"",width:"70"}}),o("el-table-column",{attrs:{label:"客户姓名",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.name))])]}}])}),o("el-table-column",{attrs:{label:"联系电话",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.tel))])]}}])}),o("el-table-column",{attrs:{label:"客户身份",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.roleStr(t.row.role)))])]}}])}),o("el-table-column",{attrs:{label:"性别",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.sex))])]}}])}),o("el-table-column",{attrs:{label:"联系地址",align:"center",width:"320"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.address))])]}}])}),o("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),o("UserDialong",{attrs:{dialong:e.dialong,form:e.form},on:{UserData:e.userInfo}})],1)},n=[],a=(o("7f7f"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"nofind"},[o("el-dialog",{attrs:{title:e.dialong.title,type:"primary",size:"small","close-on-press-escape":!1,"modal-append-to-body":!1,"close-on-click-modal":!1,visible:e.dialong.show},on:{"update:visible":function(t){e.$set(e.dialong,"show",t)}}},[o("el-form",{ref:"formdoalog",attrs:{model:e.form,rules:e.formdialog,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"客户姓名",prop:"name"}},[o("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"电话",prop:"tel"}},[o("el-input",{model:{value:e.form.tel,callback:function(t){e.$set(e.form,"tel",t)},expression:"form.tel"}})],1),o("el-form-item",{attrs:{label:"用户身份",prop:"role"}},[o("el-select",{attrs:{placeholder:"请选择考试"},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}},e._l(e.roles,function(e,t){return o("el-option",{key:t,attrs:{label:e.title,value:e.role}})}))],1),o("el-form-item",{attrs:{label:"性别",prop:"sex"}},[o("el-input",{model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}})],1),o("el-form-item",{attrs:{label:"联系地址",prop:"address"}},[o("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialong.show=!1}}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addHandle("formdoalog")}}},[e._v("确 定")])],1)],1)],1)}),s=[],r={name:"UserInfoDialog",data:function(){return{formdialog:{name:[{required:!0,message:"用户名不能为空",trigger:"blur"}],tel:[{required:!0,message:"请填写用户电话号码",trigger:"blur"}]},roles:[{title:"一般客户",role:0},{title:"投保人",role:1},{title:"被保险人",role:2},{title:"联系人",role:3}],role:"一般客户"}},props:{dialong:Object,form:Object},methods:{addHandle:function(e){var t=this;"一般客户"===this.role&&(this.role=0),this.form.role=this.role,this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var o="add"==t.dialong.option?"add":"/edit/".concat(t.form.id);t.$axios.post("http://localhost:3000/api/users/".concat(o),t.form).then(function(e){t.$message({type:"success",message:"数据添加成功"}),t.dialong.show=!1,t.$emit("UserData"),t.form=""})})}}},i=r,c=(o("3cc9"),o("2877")),f=Object(c["a"])(i,a,s,!1,null,"7459e06f",null);f.options.__file="UserInfoDialog.vue";var d=f.exports,u={name:"Staff",data:function(){return{userData:[],dialong:{show:!1,title:"",option:"edit"},form:{name:"",sex:"",tel:"",address:"",role:0}}},methods:{roleStr:function(e){var t=[{title:"一般客户",role:0},{title:"投保人",role:1},{title:"被保险人",role:2},{title:"联系人",role:3}];return t[parseInt(e)].title},userInfo:function(){var e=this;console.log("获取用户列表"),this.$axios.get("/api/users").then(function(t){console.log(t),e.userData=t.data.results}).catch(function(e){console.log(e)})},handleEdit:function(e,t){console.log(t),this.dialong={title:"编辑信息",show:!0,option:"edit"},this.form={name:t.name,sex:t.sex,state:t.tel,address:t.address,id:t._id,role:t.role}},handleDelete:function(e,t){var o=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.$axios.delete("/api/users/delete/".concat(t._id)).then(function(e){o.$message({type:"success",message:"删除成功!"})}),o.userInfo()}).catch(function(){o.$message({type:"info",message:"已取消删除"})})},addUser:function(){this.dialong={title:"添加信息",show:!0,option:"add"},this.form={name:"",sex:"",birthday:"",address:"",role:0,tel:""}}},created:function(){this.userInfo()},components:{UserDialong:d}},m=u,p=(o("dd57"),Object(c["a"])(m,l,n,!1,null,"c584f7a6",null));p.options.__file="Users.vue";t["default"]=p.exports},dd57:function(e,t,o){"use strict";var l=o("64bb"),n=o.n(l);n.a}}]);
//# sourceMappingURL=chunk-26b06714.12dc3e63.js.map