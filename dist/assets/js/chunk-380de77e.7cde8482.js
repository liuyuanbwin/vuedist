(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-380de77e"],{"4f00":function(e,t,l){"use strict";var a=l("dedd"),i=l.n(a);i.a},b7d4:function(e,t,l){},bc87:function(e,t,l){"use strict";var a=l("b7d4"),i=l.n(a);i.a},c62b:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"staff"},[l("div",{staticClass:"staff-top"},[l("el-form",{attrs:{inline:!0}},[l("el-form-item",{staticClass:"btnRight"},[l("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-edit-outline"},on:{click:function(t){e.addBill()}}},[e._v("添加")])],1)],1)],1),l("div",{staticClass:"list"},[l("div",{staticClass:"tab"},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"border"}},[l("el-table-column",{attrs:{type:"index",label:"序号",align:"center",sortable:"sortable",width:"70"}}),l("el-table-column",{attrs:{label:"车牌号",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.plate))])]}}])}),l("el-table-column",{attrs:{label:"车主",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.owners))])]}}])}),l("el-table-column",{attrs:{label:"汽车型号",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.brand)+"\n                            -\n                            "+e._s(t.row.model))])]}}])}),l("el-table-column",{attrs:{label:"被保险人",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.insurant))])]}}])}),l("el-table-column",{attrs:{label:"联系人",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.linkman))])]}}])}),l("el-table-column",{attrs:{label:"联系人电话",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.linkmanTel))])]}}])}),l("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{size:"mini"},on:{click:function(l){e.billEdit(t.$index,t.row)}}},[e._v("编辑")]),l("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(l){e.billDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),l("div",{staticClass:"page"},[l("el-pagination",{attrs:{"current-page":e.paginations.page_index,"page-sizes":e.paginations.page_sizes,"page-size":e.paginations.page_size,layout:e.paginations.layout,total:e.paginations.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),l("BillDialog",{attrs:{dialong:e.dialong,form:e.form},on:{BillData:e.getInfoList}})],1)},i=[],n=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"nofind"},[l("el-dialog",{attrs:{title:e.dialong.title,type:"primary",size:"small","close-on-press-escape":!1,"modal-append-to-body":!1,"close-on-click-modal":!1,visible:e.dialong.show},on:{"update:visible":function(t){e.$set(e.dialong,"show",t)}}},[l("el-form",{ref:"formdoalog",attrs:{model:e.form,rules:e.formdialog,"label-width":"80px"}},[l("el-form-item",{attrs:{"label-width":"160px",label:"车牌号",prop:"plate"}},[l("el-input",{model:{value:e.form.plate,callback:function(t){e.$set(e.form,"plate",t)},expression:"form.plate"}})],1),l("el-form-item",{attrs:{"label-width":"160px",label:"汽车品牌",prop:"brand"}},[l("el-input",{model:{value:e.form.brand,callback:function(t){e.$set(e.form,"brand",t)},expression:"form.brand"}})],1),l("el-form-item",{attrs:{"label-width":"160px",label:"汽车型号",prop:"model"}},[l("el-input",{model:{value:e.form.model,callback:function(t){e.$set(e.form,"model",t)},expression:"form.model"}})],1),l("el-form-item",{attrs:{"label-width":"160px",label:"车主姓名",prop:"owners"}},[l("el-input",{model:{value:e.form.owners,callback:function(t){e.$set(e.form,"owners",t)},expression:"form.owners"}})],1),l("el-form-item",{attrs:{"label-width":"160px",label:"被保险人",prop:"insurant"}},[l("el-input",{model:{value:e.form.insurant,callback:function(t){e.$set(e.form,"insurant",t)},expression:"form.insurant"}})],1),l("el-form-item",{attrs:{"label-width":"160px",label:"联系人",prop:"linkman"}},[l("el-input",{model:{value:e.form.linkman,callback:function(t){e.$set(e.form,"linkman",t)},expression:"form.linkman"}})],1),l("el-form-item",{attrs:{"label-width":"160px",label:"联系人电话",prop:"linkmanTel"}},[l("el-input",{model:{value:e.form.linkmanTel,callback:function(t){e.$set(e.form,"linkmanTel",t)},expression:"form.linkmanTel"}})],1),l("el-form-item",{attrs:{"label-width":"160px",label:"首次登记日期",prop:"registDate"}},[l("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.registDate,callback:function(t){e.$set(e.form,"registDate",t)},expression:"form.registDate"}})],1),l("el-form-item",{attrs:{"label-width":"160px",label:"车辆类型",prop:"vehicleType"}},[l("el-input",{model:{value:e.form.vehicleType,callback:function(t){e.$set(e.form,"vehicleType",t)},expression:"form.vehicleType"}})],1),l("el-form-item",{attrs:{"label-width":"160px",label:"出单单位",prop:"agentUnit"}},[l("el-input",{model:{value:e.form.agentUnit,callback:function(t){e.$set(e.form,"agentUnit",t)},expression:"form.agentUnit"}})],1),l("el-form-item",{attrs:{"label-width":"160px",label:"业务经理",prop:"agent"}},[l("el-input",{model:{value:e.form.agent,callback:function(t){e.$set(e.form,"agent",t)},expression:"form.agent"}})],1),l("el-form-item",{attrs:{"label-width":"160px",label:"最近一次投保公司",prop:"latestUnit"}},[l("el-input",{model:{value:e.form.latestUnit,callback:function(t){e.$set(e.form,"latestUnit",t)},expression:"form.latestUnit"}})],1),l("el-form-item",{attrs:{"label-width":"160px",label:"最近一次投保公司电话",prop:"latestUnitTel"}},[l("el-input",{model:{value:e.form.latestUnitTel,callback:function(t){e.$set(e.form,"latestUnitTel",t)},expression:"form.latestUnitTel"}})],1),l("el-form-item",{attrs:{"label-width":"160px",label:"今年投保公司",prop:"toyearUnit"}},[l("el-input",{model:{value:e.form.toyearUnit,callback:function(t){e.$set(e.form,"toyearUnit",t)},expression:"form.toyearUnit"}})],1),l("el-form-item",{attrs:{"label-width":"160px",label:"今年投保公司电话",prop:"toyearUnitTel"}},[l("el-input",{model:{value:e.form.toyearUnitTel,callback:function(t){e.$set(e.form,"toyearUnitTel",t)},expression:"form.toyearUnitTel"}})],1),l("el-form-item",{attrs:{"label-width":"160px",label:"交强险到期日期",prop:"CLIExpireDate"}},[l("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.CLIExpireDate,callback:function(t){e.$set(e.form,"CLIExpireDate",t)},expression:"form.CLIExpireDate"}})],1),l("el-form-item",{attrs:{"label-width":"160px",label:"商业险到期日期",prop:"GAPExpireDate"}},[l("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.form.GAPExpireDate,callback:function(t){e.$set(e.form,"GAPExpireDate",t)},expression:"form.GAPExpireDate"}})],1),l("el-form-item",{attrs:{"label-width":"160px",label:"商业险内容",prop:"GAPContent"}},[l("el-input",{model:{value:e.form.GAPContent,callback:function(t){e.$set(e.form,"GAPContent",t)},expression:"form.GAPContent"}})],1),l("el-form-item",{attrs:{"label-width":"160px",label:"咨询电话",prop:"hotline"}},[l("el-input",{model:{value:e.form.hotline,callback:function(t){e.$set(e.form,"hotline",t)},expression:"form.hotline"}})],1)],1),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialong.show=!1}}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addHandle("formdoalog")}}},[e._v("确 定")])],1)],1)],1)},o=[],r={name:"BillInfoDialog",data:function(){return{formdialog:{plate:[{required:!0,message:"车牌号不能为空",trigger:"blur"}],registDate:[{required:!0,message:"请填写首次登记日期",trigger:"blur"}],linkmanTel:[{required:!0,message:"请填写联系电话",trigger:"blur"}]},roles:[{title:"一般客户",role:0},{title:"投保人",role:1},{title:"被保险人",role:2},{title:"联系人",role:3}],role:"一般客户"}},props:{dialong:Object,form:Object},methods:{addHandle:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var l="add"==t.dialong.option?"add":"/edit/".concat(t.form.id);console.log(t.form),t.$axios.post("http://localhost:3000/api/bills/".concat(l),t.form).then(function(e){t.$message({type:"success",message:"数据添加成功"}),t.dialong.show=!1,t.$emit("BillData"),t.form=""})})}}},s=r,p=(l("4f00"),l("2877")),f=Object(p["a"])(s,n,o,!1,null,"3b05c8a8",null);f.options.__file="BillInfoDialog.vue";var c=f.exports,m={name:"list",data:function(){return{tableData:[],paginations:{page_index:1,total:0,page_size:5,page_sizes:[5,10,15,20],layout:"total, sizes, prev, pager, next, jumper"},allTableData:[],dialong:{show:!1,title:"",option:"edit"},form:{}}},methods:{getInfoList:function(){var e=this;this.$axios.get("/api/bills").then(function(t){if(1===t.data.status){var l=t.data.results;e.allTableData=l,e.setPaginations()}})},setPaginations:function(){var e=this;this.paginations.total=this.allTableData.length,this.paginations.page_index=1,this.paginations.page_size=5,this.tableData=this.allTableData.filter(function(t,l){return l<e.paginations.page_size})},handleSizeChange:function(e){this.paginations.page_index=1,this.paginations.page_size=e,this.tableData=this.allTableData.filter(function(t,l){return l<e})},handleCurrentChange:function(e){for(var t=this.paginations.page_size*(e-1),l=this.paginations.page_size*e,a=[],i=t;i<l;i++)this.allTableData[i]&&a.push(this.allTableData[i]),this.tableData=a},addBill:function(){this.dialong={title:"录入保单",show:!0,option:"add"},this.form={}},billEdit:function(e,t){this.dialong={title:"编辑保单",show:!0,option:"edit"},this.form={plate:t.plate,brand:t.brand,model:t.model,owners:t.owners,insurant:t.insurant,linkman:t.linkman,linkmanTel:t.linkmanTel,registDate:t.registDate,vehicleType:t.vehicleType,agentUnit:t.agentUnit,agent:t.agent,latestUnit:t.latestUnit,latestUnitTel:t.latestUnitTel,toyearUnit:t.toyearUnit,toyearUnitTel:t.toyearUnitTel,CLIExpireDate:t.CLIExpireDate,GAPExpireDate:t.GAPExpireDate,GAPContent:t.GAPContent,hotline:t.hotline}},billDelete:function(e,t){var l=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l.$axios.delete("/api/bills/delete/".concat(t._id)).then(function(e){l.$message({type:"success",message:"删除成功!"})}),l.getInfoList()}).catch(function(){l.$message({type:"info",message:"已取消删除"})})}},created:function(){this.getInfoList()},components:{BillDialog:c}},d=m,u=(l("bc87"),Object(p["a"])(d,a,i,!1,null,"5eef08f8",null));u.options.__file="Bills.vue";t["default"]=u.exports},dedd:function(e,t,l){}}]);
//# sourceMappingURL=chunk-380de77e.7cde8482.js.map